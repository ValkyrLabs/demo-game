import React, { useState, useEffect, useRef } from 'react';
import { DataObject, {{classname}} } from '../../../model';
import { useGet{{classname}}sQuery, useAdd{{classname}}Mutation, useUpdate{{classname}}Mutation } from '../../services/{{classname}}Service';
import TimeSeriesChart from "../../../../components/Charts/TimeSeriesChart";
import { Spinner } from 'react-bootstrap';
/**
############################## DO NOT EDIT: GENERATED FILE ##############################

Generated by Valkyr Labs ThorAPI: https://valkyrlabs.com/thorapi

Powered by Swagger Codegen: http://swagger.io

Generated Details:
**GENERATOR VERSION:** {{{generatorVersion}}}
**GENERATED DATE:** {{generatedDate}}
**GENERATOR CLASS:** {{generatorClass}}

Template file: typescript-redux-query/modelChart.mustache

############################## DO NOT EDIT: GENERATED FILE ##############################

Description: {{#description}}{{.}}{{/description}}{{^description}}{{classname}}{{/description}}

  @author John McMahon ~ github: SpaceGhost69 | twitter: @TechnoCharms
  @see https://valkyrlabs.com/docs

*/
const fieldSkipList = ['ownerId', 'keyHash', 'workflowStateId', 'createdDate', 'lastAccessedById', 'lastAccessedDate', 'lastModifiedDate', 'lastModifiedById'];

const {{classname}}Chart: React.FC = () => {
  const { data: initialData = [], isLoading } = useGet{{classname}}sQuery();

  const [data, setData] = useState<{{classname}}[]>([]); // Array to hold table data
  const [chartData, setChartData] = useState<Partial<{{classname}}>>({});
  const inputRef = useRef<HTMLInputElement | null>(null);
  const [showAllFields, setShowAllFields] = useState(false);

  useEffect(() => {
    if (initialData) {
      setData(initialData);
    }
  }, [initialData]);

  const handleInputChange = (field: string, value: any) => {
    setChartData((prev) => ({
      ...prev,
      [field]: value,
    }));
  };

  const renderValue = (value: any) => {
    if (value === null || value === undefined) {
      return '';
    }
    if (typeof value === 'object') {
      return JSON.stringify(value, null, 2);
    }
    return value;
  };

  return (
    <>
          {isLoading ? (
            <Spinner animation="border" />
          ) : (
            <TimeSeriesChart data={data.flatMap(({{#lambda.lowercase}}{{classname}}{{/lambda.lowercase}}: DataObject) => [{{#lambda.lowercase}}{{classname}}{{/lambda.lowercase}}])} />
          )}
    </>
  );
};

export default {{classname}}Chart;
